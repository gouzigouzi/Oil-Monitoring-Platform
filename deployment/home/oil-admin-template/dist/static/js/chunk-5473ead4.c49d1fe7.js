(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5473ead4"],{"14c4":function(e,t,n){},"586a":function(e,t,n){},"8eb8":function(e,t,n){"use strict";n("14c4")},"9b9a":function(e,t,n){"use strict";n("586a")},e382:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-form",{ref:"form",staticClass:"demo-form-inline form-container",attrs:{inline:!0,model:e.form}},[n("el-form-item",{attrs:{label:"人员查询"}},[n("el-input",{attrs:{placeholder:"人员信息",clearable:""},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1),n("el-form-item",{attrs:{label:"所属公司"}},[n("el-select",{attrs:{placeholder:"公司名称"},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}},e._l(e.companies,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("查询")])],1),n("el-form-item",[n("el-button",{attrs:{type:"success",icon:"el-icon-refresh"},on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")])],1)],1),n("el-form",{staticClass:"demo-form-inline form-container",attrs:{inline:!0}},[n("el-form-item",[n("el-button",{attrs:{type:"warning",icon:"el-icon-circle-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")]),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-remove-outline"},on:{click:function(t){return e.handleDeletes()}}},[e._v("批量删除")])],1)],1),n("user-dialog",{ref:"addDialog",attrs:{title:"新增用户",dialogFormVisible:e.dialogVisible,ruleForm:e.addForm,rules:e.rules},on:{"update:dialogFormVisible":function(t){e.dialogVisible=t},"update:dialog-form-visible":function(t){e.dialogVisible=t},submits:e.handleSubmit,reset:e.handleReset}}),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",attrs:{"element-loading-text":"Loading",data:e.tableData,border:"",fit:"",stripe:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{align:"center",label:"用户名",width:"160",prop:"username"}}),n("el-table-column",{attrs:{align:"center",label:"所属公司",prop:"company"}}),n("el-table-column",{attrs:{"class-name":"status-col",label:"用户状态",width:"140",align:"center",prop:"isEnabled"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[n("el-tag",{attrs:{type:e.statusType(o.isEnabled)}},[e._v(" "+e._s(e.statusText(o.isEnabled))+" ")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"用户权限",width:"160",prop:"permission"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(e.permissionText(n.permission))+" ")]}}])}),n("el-table-column",{attrs:{align:"center",prop:"createTime",label:"用户创建时间",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createTime.toLocaleString().replace(/T/g," ").substr(0,16)))])]}}])}),n("el-table-column",{attrs:{label:"执行操作",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:e.statusType(0===t.row.isEnabled?1:0),disabled:e.statusEdit(t.row.permission)},on:{click:function(n){return e.handleUserStatus(t.row)}}},[e._v(e._s(e.statusText(0===t.row.isEnabled?1:0))),n("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"5px"}})]),n("el-button",{attrs:{size:"mini",type:"primary",disabled:e.statusEdit(t.row.permission)},on:{click:function(n){return e.handleResetPassword(t.$index,t.row)}}},[e._v("重置密码"),n("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"5px"}})])]}}])})],1),n("div",{staticClass:"pagination-container"},[n("el-pagination",{staticStyle:{padding:"20px 0"},attrs:{"current-page":e.form.page,"page-sizes":[5,10,15,20],"page-size":e.form.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},i=[],a=(n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.localDialogFormVisible,width:e.width,"custom-class":"custom-dialog","before-close":e.handleBeforeClose},on:{"update:visible":function(t){e.localDialogFormVisible=t}}},[n("el-form",{ref:"ruleForm",staticClass:"form-item",attrs:{model:e.ruleForm,rules:e.rules,inline:!1,"label-width":e.labelWidth}},[n("el-row",{staticStyle:{"padding-left":"20px"}},[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1)],1)],1),n("el-row",{staticStyle:{"padding-left":"20px"}},[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"所属公司",prop:"company"}},[n("el-input",{model:{value:e.ruleForm.company,callback:function(t){e.$set(e.ruleForm,"company",t)},expression:"ruleForm.company"}})],1)],1)],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("新增")]),n("el-button",{staticStyle:{"margin-left":"30px"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")])],1)],1)],1)}),s=[],l={name:"UserDialog",props:{title:{type:String,required:!0},dialogFormVisible:{type:Boolean,required:!0},ruleForm:{type:Object,required:!0},rules:{type:Object,required:!0},width:{type:String,default:"30%"},labelWidth:{type:String,default:"100px"}},data:function(){return{localDialogFormVisible:this.dialogFormVisible}},watch:{dialogFormVisible:function(e){this.localDialogFormVisible=e},localDialogFormVisible:function(e){this.$emit("update:dialogFormVisible",e)}},computed:{},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$confirm("确认信息无误?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("dialogForm:",t.ruleForm),t.$emit("submits",t.ruleForm)})).catch((function(){t.$message({type:"info",message:"已取消"})}))}))},resetForm:function(){this.localDialogFormVisible=!1,this.$refs.ruleForm.resetFields(),this.$emit("reset")},handleBeforeClose:function(e){this.resetForm(),e()}}},r=l,c=(n("9b9a"),n("2877")),u=Object(c["a"])(r,a,s,!1,null,"af909556",null),m=u.exports,f=n("c24f"),d={components:{UserDialog:m},data:function(){return{listLoading:!1,dialogVisible:!1,form:{info:"",company:"",page:1,pageSize:5},total:50,companies:[],tableData:[],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],company:[{required:!0,message:"所属公司不能为空"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}]},addForm:{username:"",company:""},multipleTable:[],ids:[]}},created:function(){this.companyLoad(),this.pageLoad(this.form)},methods:{statusEdit:function(e){return 1===e},statusType:function(e){var t={1:"success",0:"info"};return t[e]||"info"},statusText:function(e){var t={0:"禁用",1:"启用"};return t[e]||e},permissionText:function(e){var t={0:"用户",1:"管理员"};return t[e]||e},handleSelectionChange:function(e){console.log("row:",e),this.multipleSelection=e,this.ids=this.multipleSelection.map((function(e){return e.username})),console.log(this.multipleSelection.map((function(e){return e.username})))},handleDeletes:function(){var e=this;0!==this.ids.length&&this.$confirm("此操作将批量删除用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(f["c"])(e.ids).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.pageLoad(e.form)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},onSubmit:function(){console.log("submit!"),this.pageLoad(this.form)},resetForm:function(e){this.form.info="",this.form.company=""},handleUserStatus:function(e){var t=this,n=e.username,o=0===e.isEnabled?1:0,i=this.statusText(o);this.$confirm("确认"+i+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("statusUser:",n),Object(f["d"])(o,n).then((function(e){t.$message({type:"success",message:i+"成功!"}),t.pageLoad(t.form)})).catch((function(){t.$message({type:"error",message:i+"失败！"})}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleResetPassword:function(e,t){var n=this;this.$confirm("确认重置密码?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("resetPassword:",t.username),Object(f["i"])(t.username).then((function(e){n.$message({type:"success",message:"重置成功!"})})).catch((function(){n.$message({type:"error",message:"重置失败！"})}))})).catch((function(){n.$message({type:"info",message:"已取消"})}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.form.pageSize=e,this.pageLoad(this.form)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.form.page=e,this.pageLoad(this.form)},handleSubmit:function(e){var t=this;console.log("Form submitted with:",e),Object(f["a"])(e).then((function(n){console.log("submit:",n),t.$message({type:"success",message:"新增成功!"}),t.pageLoad(t.form),t.companyLoad(),t.$refs.addDialog.resetForm(e),t.dialogVisible=!1})).catch((function(){t.$message({type:"error",message:"新增失败！"}),t.$refs.addDialog.resetForm(e),t.dialogVisible=!1}))},handleReset:function(){console.log("Form reset")},pageLoad:function(e){var t=this;this.listLoading=!0,Object(f["h"])(e).then((function(e){console.log("pageQuery:",e),t.total=e.data.total,t.tableData=e.data.records,t.listLoading=!1}))},companyLoad:function(){var e=this;Object(f["b"])().then((function(t){console.log("company:",t),e.companies=t.data}))}}},p=d,g=(n("8eb8"),Object(c["a"])(p,o,i,!1,null,null,null));t["default"]=g.exports}}]);
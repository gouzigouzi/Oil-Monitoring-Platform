(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bc08ad3"],{"339e":function(t,e,a){"use strict";a("4eab")},"3ef0":function(t,e,a){},"408a":function(t,e,a){var n=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"4e82":function(t,e,a){"use strict";var n=a("23e7"),r=a("1c0b"),i=a("7b0b"),o=a("d039"),c=a("a640"),s=[],l=s.sort,u=o((function(){s.sort(void 0)})),d=o((function(){s.sort(null)})),h=c("sort"),f=u||!d||!h;n({target:"Array",proto:!0,forced:f},{sort:function(t){return void 0===t?l.call(i(this)):l.call(i(this),r(t))}})},"4eab":function(t,e,a){},"53e9":function(t,e,a){},"79b0":function(t,e,a){"use strict";a("53e9")},"7db0":function(t,e,a){"use strict";var n=a("23e7"),r=a("b727").find,i=a("44d2"),o=a("ae40"),c="find",s=!0,l=o(c);c in[]&&Array(1)[c]((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!l},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(c)},9406:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("panel-group",{attrs:{accumulatedData:t.accumulatedData}}),a("el-row",{staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px","border-radius":"20px"},attrs:{gutter:32}},[a("el-col",{staticClass:"left",attrs:{xs:24,sm:24,lg:12}},[a("scatter-map",{attrs:{mapData:t.mapData}})],1),a("el-col",{staticClass:"right",attrs:{xs:24,sm:24,lg:12}},[a("el-row",{staticClass:"bar"},[a("bar-chat",{attrs:{chartData:t.chartData}})],1),a("el-row",{staticStyle:{"padding-top":"20px"}},[a("transaction-table",{attrs:{listData:t.listData}})],1)],1)],1)],1)},r=[],i=a("5530"),o=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("newVisitis")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-people",staticStyle:{padding:"10px"}},[a("svg-icon",{staticStyle:{width:"60px",height:"60px"},attrs:{"icon-class":"loader","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 累计工程机械数量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.accumulatedData.accumulatedVehicleCount,duration:1200}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("messages")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-message"},[a("svg-icon",{attrs:{"icon-class":"gold","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 累计机油节省金额 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.accumulatedData.accumulatedSavingMoney,duration:1500}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("purchases")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"icon-class":"time","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 累计额外运行时间 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.accumulatedData.accumulatedExtraRuntime,duration:1800}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("shoppings")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-shopping"},[a("svg-icon",{attrs:{"icon-class":"oil","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 累计节省换油次数 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.accumulatedData.accumulatedSavedChangeCount,duration:2e3}})],1)])])],1)},s=[],l=a("ec1b"),u=a.n(l),d={props:{accumulatedData:{type:Object,required:!0}},components:{CountTo:u.a},methods:{handleSetLineChartData:function(t){this.$emit("handleSetLineChartData",t)}}},h=d,f=(a("eddc"),a("2877")),p=Object(f["a"])(h,c,s,!1,null,"03ca109b",null),m=p.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"echarts"},[a("div",{ref:"sctterMap",staticStyle:{width:"100",height:"700px","padding-bottom":"20px"}}),a("div",{staticClass:"mapChoose"},[t.parentInfo.length>1?a("el-button",{on:{click:t.goBack}},[t._v("返回")]):t._e()],1)])},v=[],b=(a("4de4"),a("7db0"),a("d81d"),a("4e82"),a("a434"),a("b0c0"),a("b680"),a("d3b7"),a("313e")),y=a.n(b),C=a("ed08"),w={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(C["a"])((function(){console.log("resize"),console.log(t.chart),t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}},x=a("fbb2"),D={name:"sctterMap",mixins:[w],props:{mapData:Array},data:function(){return{chart:null,geoJson:{features:[]},parentInfo:[{cityName:"全国",code:1e5}]}},mounted:function(){this.getGeoJson(1e5)},methods:{getGeoJson:function(t){var e=this;AMapUI.loadUI(["geo/DistrictExplorer"],(function(a){var n=new a;n.loadAreaNode(t,(function(a,n){if(a)console.error(a);else{var r=n.getSubFeatures();if(r.length>0)e.geoJson.features=r;else if(0===r.length&&(e.geoJson.features=e.geoJson.features.filter((function(e){return e.properties.adcode==t})),0===e.geoJson.features.length))return;console.log("city1",e.parentInfo),1==e.parentInfo.length?(console.log("city1",e.parentInfo[0].cityName),e.getMapData(e.parentInfo[0].cityName)):2==e.parentInfo.length?(console.log("city2",e.parentInfo[1].cityName),e.getMapData(e.parentInfo[1].cityName)):e.getMapData("city")}}))}))},getMapData:function(t){var e=this;Object(x["k"])(t).then((function(t){var a=e.geoJson.features.map((function(e){var a=t.data.find((function(t){return t.cityName===e.properties.name}));return console.log("match",a),{name:e.properties.name,value:a?a.vehicleCount:0,cityCode:e.properties.adcode}}));a=a.sort((function(t,e){return e.value-t.value})),console.log(a),e.initEcharts(a)})).catch((function(){e.$message({type:"error",message:"获取车辆分布数据失败"})}))},initEcharts:function(t){var e=t[t.length-1].value,a=t[0].value;1===t.length&&(e=0),this.chart=y.a.init(this.$refs.sctterMap),console.log(this.chart),y.a.registerMap("Map",this.geoJson),this.chart.setOption({tooltip:{trigger:"item",formatter:function(t){var e=t.value;e||(e=0);var a=t.name+":"+e.toFixed(2);return a}},title:{show:!0,left:"center",top:"15",text:this.parentInfo[this.parentInfo.length-1].cityName+"车辆分布图",textStyle:{color:"#666666",fontSize:20}},toolbox:{feature:{restore:{show:!1},dataZoom:{show:!1},magicType:{show:!1}},iconStyle:{normal:{borderColor:"#1990DA"}},top:15,right:35},visualMap:{min:e,max:a,left:"3%",bottom:"5%",calculable:!0,seriesIndex:[0],inRange:{color:["#0D96F1","#3a8abc","#105389"]},textStyle:{color:"#24CFF4"}},series:[{name:"地图",type:"map",map:"Map",roam:!0,zoom:1.2,data:t,label:{normal:{show:!0,color:"rgb(249, 249, 249)",formatter:function(t){switch(t.name){case"内蒙古自治区":t.name="内蒙古";break;case"西藏自治区":t.name="西藏";break;case"新疆维吾尔自治区":t.name="新疆";break;case"宁夏回族自治区":t.name="宁夏";break;case"广西壮族自治区":t.name="广西";break;case"香港特别行政区":t.name="香港";break;case"澳门特别行政区":t.name="澳门";break;default:break}return t.name}},emphasis:{show:!0,color:"#f75a00"}},itemStyle:{normal:{areaColor:"#24CFF4",borderColor:"#53D9FF",borderWidth:1.3,shadowBlur:15,shadowColor:"rgb(58,115,192)",shadowOffsetX:7,shadowOffsetY:6},emphasis:{areaColor:"#8dd7fc",borderWidth:1.6,shadowBlur:25}}}]},!0);var n=this;this.chart.off("click"),this.chart.on("click",(function(t){if(n.parentInfo[n.parentInfo.length-1].code!=t.data.cityCode){var e=t.data;n.parentInfo.push({cityName:e.name,code:e.cityCode}),n.getGeoJson(e.cityCode)}}))},chooseArea:function(t,e){this.parentInfo.length!==e+1&&(this.parentInfo.splice(e+1),this.getGeoJson(this.parentInfo[this.parentInfo.length-1].code))},goBack:function(){this.parentInfo.length>1&&(this.parentInfo.pop(),this.getGeoJson(this.parentInfo[this.parentInfo.length-1].code))}}},S=D,_=(a("339e"),Object(f["a"])(S,g,v,!1,null,"369237a6",null)),E=_.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},z=[];a("817d");var O={mixins:[w],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Array,required:!0}},data:function(){return{chart:null}},watch:{chartData:{handler:function(t){this.initChart(t)},deep:!0}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart(t.chartData)}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(t){this.chart=y.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:"车辆累计运行时间排行榜",show:!0,left:"center",top:"15",textStyle:{color:"#666666",fontSize:20,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{inverse:!0,type:"category",data:t.map((function(t){return t.deviceName}))},series:[{type:"bar",data:t.map((function(t){return t.deviceAccumulatedRuntime}))}]})}}},k=O,I=Object(f["a"])(k,$,z,!1,null,null,null),j=I.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%","padding-top":"15px"},attrs:{data:t.listData,stripe:""}},[a("el-table-column",{attrs:{label:"车辆名称","min-width":"100",prop:"deviceName",align:"center"}}),a("el-table-column",{attrs:{label:"车辆所在地点",width:"200",align:"center",prop:"deviceLocation"}}),a("el-table-column",{attrs:{label:"上一次换油时间",width:"150",align:"center",prop:"lastChangeDatetime"}}),a("el-table-column",{attrs:{label:"机油状态",width:"100",align:"center",prop:"oilStatus"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-tag",{attrs:{type:t.statusType(n.oilStatus)}},[t._v(" "+t._s(t.statusText(n.oilStatus))+" ")])]}}])})],1)},R=[],M={props:{listData:{type:Array,required:!0}},filters:{orderNoFilter:function(t){return t.substring(0,30)}},data:function(){return{}},created:function(){},methods:{statusType:function(t){var e={0:"success",1:"warning",2:"danger"};return e[t]||"info"},statusText:function(t){var e={0:"健康",1:"已老化",2:"需换油"};return e[t]||t}}},L=M,T=Object(f["a"])(L,N,R,!1,null,null,null),A=T.exports,F={name:"Dashboard",components:{PanelGroup:m,scatterMap:E,BarChat:j,TransactionTable:A},data:function(){return{mapData:[],chartData:[],listData:[],accumulatedData:{accumulatedVehicleCount:0,accumulatedSavingMoney:0,accumulatedExtraRuntime:0,accumulatedSavedChangeCount:0}}},computed:Object(i["a"])({},Object(o["b"])(["name"])),methods:{dataLoad:function(){var t=this;Object(x["i"])().then((function(e){console.log("rank:",e.data),t.chartData=e.data,t.listData=e.data}))},accumulatedLoad:function(){var t=this;Object(x["a"])().then((function(e){console.log("accumulated:",e.data),t.accumulatedData=e.data}))}},mounted:function(){this.dataLoad(),this.accumulatedLoad()}},J=F,H=(a("79b0"),Object(f["a"])(J,n,r,!1,null,"705df848",null));e["default"]=H.exports},a434:function(t,e,a){"use strict";var n=a("23e7"),r=a("23cb"),i=a("a691"),o=a("50c4"),c=a("7b0b"),s=a("65f0"),l=a("8418"),u=a("1dde"),d=a("ae40"),h=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,m=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!h||!f},{splice:function(t,e){var a,n,u,d,h,f,b=c(this),y=o(b.length),C=r(t,y),w=arguments.length;if(0===w?a=n=0:1===w?(a=0,n=y-C):(a=w-2,n=m(p(i(e),0),y-C)),y+a-n>g)throw TypeError(v);for(u=s(b,n),d=0;d<n;d++)h=C+d,h in b&&l(u,d,b[h]);if(u.length=n,a<n){for(d=C;d<y-n;d++)h=d+n,f=d+a,h in b?b[f]=b[h]:delete b[f];for(d=y;d>y-n+a;d--)delete b[d-1]}else if(a>n)for(d=y-n;d>C;d--)h=d+n-1,f=d+a-1,h in b?b[f]=b[h]:delete b[f];for(d=0;d<a;d++)b[d+C]=arguments[d+2];return b.length=y-n+a,u}})},b680:function(t,e,a){"use strict";var n=a("23e7"),r=a("a691"),i=a("408a"),o=a("1148"),c=a("d039"),s=1..toFixed,l=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},d=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},h=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){s.call({})}));n({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,a,n,c,s=i(this),h=r(t),f=[0,0,0,0,0,0],p="",m="0",g=function(t,e){var a=-1,n=e;while(++a<6)n+=t*f[a],f[a]=n%1e7,n=l(n/1e7)},v=function(t){var e=6,a=0;while(--e>=0)a+=f[e],f[e]=l(a/t),a=a%t*1e7},b=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==f[t]){var a=String(f[t]);e=""===e?a:e+o.call("0",7-a.length)+a}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(p="-",s=-s),s>1e-21)if(e=d(s*u(2,69,1))-69,a=e<0?s*u(2,-e,1):s/u(2,e,1),a*=4503599627370496,e=52-e,e>0){g(0,a),n=h;while(n>=7)g(1e7,0),n-=7;g(u(10,n,1),0),n=e-1;while(n>=23)v(1<<23),n-=23;v(1<<n),g(1,1),v(2),m=b()}else g(0,a),g(1<<-e,0),m=b()+o.call("0",h);return h>0?(c=m.length,m=p+(c<=h?"0."+o.call("0",h-c)+m:m.slice(0,c-h)+"."+m.slice(c-h))):m=p+m,m}})},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("53ca"),a("d3b7"),a("4d63"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("4d90"),a("5319"),a("159b");function n(t,e,a){var n,r,i,o,c,s=function s(){var l=+new Date-o;l<e&&l>0?n=setTimeout(s,e-l):(n=null,a||(c=t.apply(i,r),n||(i=r=null)))};return function(){for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];i=this,o=+new Date;var d=a&&!n;return n||(n=setTimeout(s,e)),d&&(c=t.apply(i,l),i=l=null),c}}},eddc:function(t,e,a){"use strict";a("3ef0")},fbb2:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"g",(function(){return i})),a.d(e,"j",(function(){return o})),a.d(e,"e",(function(){return c})),a.d(e,"h",(function(){return s})),a.d(e,"c",(function(){return l})),a.d(e,"f",(function(){return u})),a.d(e,"d",(function(){return d})),a.d(e,"i",(function(){return h})),a.d(e,"a",(function(){return f})),a.d(e,"k",(function(){return p}));var n=a("b775");function r(t){return Object(n["a"])({url:"/vehicle/add",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/vehicle/page",method:"get",params:{information:t.info,region:t.region,startDateTime:t.startDateTime,endDateTime:t.endDateTime,page:t.page,pageSize:t.pageSize}})}function o(){return Object(n["a"])({url:"/vehicle/region",method:"get"})}function c(){return Object(n["a"])({url:"/vehicle/list",method:"get"})}function s(t){return Object(n["a"])({url:"/vehicle/query",method:"get",params:{deviceNo:t}})}function l(t){return Object(n["a"])({url:"/vehicle/delete",method:"delete",data:t})}function u(t){return Object(n["a"])({url:"/vehicle/edit",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/vehicle/detail",method:"get",params:{deviceNo:t}})}function h(){return Object(n["a"])({url:"/vehicle/rank",method:"get"})}function f(){return Object(n["a"])({url:"/vehicle/accumulated",method:"get"})}function p(t){return Object(n["a"])({url:"/vehicle/vehicleScatter",method:"get",params:{deviceLocationProvince:t}})}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bc39639"],{"0f69":function(e,t,l){"use strict";l("aa0d")},"2bcd":function(e,t,l){},"2d78":function(e,t,l){"use strict";l("2bcd")},aa0d:function(e,t,l){},bfb3:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-form",{staticClass:"demo-form-inline form-container",attrs:{inline:!0,model:e.form}},[l("el-form-item",{attrs:{label:"样本查询"}},[l("el-input",{attrs:{placeholder:"样本信息"},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1),l("el-form-item",{attrs:{label:"活动区域"}},[l("el-select",{attrs:{placeholder:"活动区域"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},e._l(e.regions,(function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),l("el-form-item",{attrs:{label:"采样时间"}},[l("el-col",{attrs:{span:11}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"开始日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1),l("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),l("el-col",{attrs:{span:11}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.date2,callback:function(t){e.$set(e.form,"date2",t)},expression:"form.date2"}})],1)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("查询")])],1),l("el-form-item",[l("el-button",{attrs:{type:"success",icon:"el-icon-refresh"},on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")])],1)],1),l("el-form",{staticClass:"demo-form-inline form-container",attrs:{inline:!0,model:e.form}},[l("el-form-item",[l("el-button",{attrs:{type:"warning",icon:"el-icon-circle-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")]),l("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-remove-outline"},on:{click:function(t){return e.handleDeletes()}}},[e._v("批量删除")])],1)],1),l("sample-dialog",{ref:"addDialog",attrs:{title:"新增样本",dialogFormVisible:e.dialogVisible,ruleForm:e.addForm,rules:e.rules},on:{"update:dialogFormVisible":function(t){e.dialogVisible=t},"update:dialog-form-visible":function(t){e.dialogVisible=t},submits:e.handleSubmit,reset:e.handleReset}}),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",attrs:{"element-loading-text":"Loading",data:e.tableData,border:"",fit:"",stripe:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),l("el-table-column",{attrs:{align:"center",label:"车辆编号",width:"160",prop:"deviceNo"}}),l("el-table-column",{attrs:{align:"center",label:"车辆名称",width:"160",prop:"deviceName"}}),l("el-table-column",{attrs:{align:"center",label:"采样周期",width:"100",prop:"oilCycle"}}),l("el-table-column",{attrs:{align:"center",label:"机油运行时间",width:"160",prop:"oilRuntime"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.oilRuntime.toFixed(2)+"小时"))])]}}])}),l("el-table-column",{attrs:{align:"center",prop:"oilSampleDate",label:"采样时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("i",{staticClass:"el-icon-time"}),l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.oilSampleDate.toLocaleString().replace(/T/g," ").substr(0,16)))])]}}])}),l("el-table-column",{attrs:{align:"center",label:"样本编号",prop:"oilSampleId"}}),l("el-table-column",{attrs:{align:"center",label:"更新时间",width:"200",prop:"updateTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("i",{staticClass:"el-icon-time"}),l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.updateTime.toLocaleString().replace(/T/g," ").substr(0,16)))])]}}])}),l("el-table-column",{attrs:{label:"执行操作",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(l){return e.viewSamples(t.$index,t.row)}}},[e._v("查看"),l("i",{staticClass:"el-icon-info",staticStyle:{"margin-left":"5px"}})])]}}])})],1),l("sample-dialog",{attrs:{title:"样本信息",dialogFormVisible:e.dialogFormVisible,ruleForm:e.editForm,rules:e.rules,disabled:!0},on:{"update:dialogFormVisible":function(t){e.dialogFormVisible=t},"update:dialog-form-visible":function(t){e.dialogFormVisible=t}}}),l("div",{staticClass:"pagination-container"},[l("el-pagination",{staticStyle:{padding:"20px 0"},attrs:{"current-page":e.form.page,"page-sizes":[5,10,15,20],"page-size":e.form.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},o=[],a=(l("caad"),l("d81d"),l("b0c0"),l("ac1f"),l("00b4"),l("2532"),function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-dialog",{attrs:{title:e.title,visible:e.localDialogFormVisible,width:e.width,"custom-class":"custom-dialog","before-close":e.handleBeforeClose},on:{"update:visible":function(t){e.localDialogFormVisible=t}}},[l("el-form",{ref:"ruleForm",staticClass:"form-item",attrs:{model:e.ruleForm,rules:e.rules,inline:!1,"label-width":e.labelWidth}},[l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"车辆编号",prop:"deviceNo"}},[l("el-select",{attrs:{placeholder:"车辆编号",disabled:e.disabled},model:{value:e.ruleForm.deviceNo,callback:function(t){e.$set(e.ruleForm,"deviceNo",t)},expression:"ruleForm.deviceNo"}},e._l(this.lists,(function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),l("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[l("el-form-item",{attrs:{label:"发动机型号",prop:"engineType"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.engineType,callback:function(t){e.$set(e.ruleForm,"engineType",t)},expression:"ruleForm.engineType"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油周期",prop:"oilCycle"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.oilCycle,callback:function(t){e.$set(e.ruleForm,"oilCycle",e._n(t))},expression:"ruleForm.oilCycle"}})],1)],1),l("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油型号",prop:"oilType"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.oilType,callback:function(t){e.$set(e.ruleForm,"oilType",t)},expression:"ruleForm.oilType"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油更换时间",prop:"oilChangeDate"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"机油更换日期",disabled:e.disabled,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.ruleForm.oilChangeDate,callback:function(t){e.$set(e.ruleForm,"oilChangeDate",t)},expression:"ruleForm.oilChangeDate"}})],1)],1),l("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[l("el-form-item",{attrs:{label:"样本采样日期",prop:"oilSampleDate"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"样本采样日期",disabled:e.disabled,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.ruleForm.oilSampleDate,callback:function(t){e.$set(e.ruleForm,"oilSampleDate",t)},expression:"ruleForm.oilSampleDate"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油酸值",prop:"oilTan"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.oilTan,callback:function(t){e.$set(e.ruleForm,"oilTan",t)},expression:"ruleForm.oilTan"}})],1)],1),l("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油碱值",prop:"oilTbn"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.oilTbn,callback:function(t){e.$set(e.ruleForm,"oilTbn",t)},expression:"ruleForm.oilTbn"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油水分",prop:"oilWater"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.oilWater,callback:function(t){e.$set(e.ruleForm,"oilWater",t)},expression:"ruleForm.oilWater"}})],1)],1),l("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油粘度",prop:"oilViscosity"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.oilViscosity,callback:function(t){e.$set(e.ruleForm,"oilViscosity",t)},expression:"ruleForm.oilViscosity"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油铁含量",prop:"oilFe"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.oilFe,callback:function(t){e.$set(e.ruleForm,"oilFe",t)},expression:"ruleForm.oilFe"}})],1)],1),l("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油铜含量",prop:"oilCu"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.oilCu,callback:function(t){e.$set(e.ruleForm,"oilCu",t)},expression:"ruleForm.oilCu"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油铝含量",prop:"oilAl"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.oilAl,callback:function(t){e.$set(e.ruleForm,"oilAl",t)},expression:"ruleForm.oilAl"}})],1)],1),l("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油硅含量",prop:"oilSi"}},[l("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.oilSi,callback:function(t){e.$set(e.ruleForm,"oilSi",t)},expression:"ruleForm.oilSi"}})],1)],1)],1),l("el-row",[l("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:11}},[l("el-form-item",{attrs:{label:"机油周期终点",prop:"isEnd"}},[l("el-switch",{attrs:{disabled:e.disabled,"active-value":"1","inactive-value":"0"},model:{value:e.ruleForm.isEnd,callback:function(t){e.$set(e.ruleForm,"isEnd",t)},expression:"ruleForm.isEnd"}})],1)],1)],1),"新增样本"===e.title?l("div",{staticClass:"add-vehicle-warning"},[e._v(" 新增样本必须保证数据正确，后续无法更改数据！！数据正确性会影响模型参数！！ ")]):e._e(),"新增样本"===e.title?l("div",{staticStyle:{"margin-top":"20px"}},[l("el-row",{attrs:{type:"flex",justify:"center"}},[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("新增")]),l("el-button",{staticStyle:{"margin-left":"30px"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")])],1)],1):e._e()],1)],1)}),r=[],n=l("fbb2"),s={name:"SampleDialog",props:{title:{type:String,required:!0},dialogFormVisible:{type:Boolean,required:!0},ruleForm:{type:Object,required:!0},rules:{type:Object,required:!0},width:{type:String,default:"45%"},labelWidth:{type:String,default:"100px"},disabled:{type:Boolean,default:!1}},created:function(){var e=this;Object(n["e"])().then((function(t){console.log("deviceNoList:",t),e.lists=t.data}))},data:function(){return{localDialogFormVisible:this.dialogFormVisible,lists:""}},watch:{dialogFormVisible:function(e){this.localDialogFormVisible=e},localDialogFormVisible:function(e){this.$emit("update:dialogFormVisible",e)}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$confirm("确认样本信息无误?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("dialogForm:",t.ruleForm),t.$emit("submits",t.ruleForm)})).catch((function(){t.$message({type:"info",message:"已取消"})}))}))},resetForm:function(e){this.localDialogFormVisible=!1,this.$refs.ruleForm.resetFields(),this.cities=[],this.$emit("reset")},handleBeforeClose:function(e){this.disabled?this.localDialogFormVisible=!1:(this.resetForm(),e())},loadDeviceNo:function(){}}},c=s,u=(l("2d78"),l("2877")),d=Object(u["a"])(c,a,r,!1,null,"2df12df6",null),m=d.exports,p=l("b775");function g(e){return Object(p["a"])({url:"/oilsample/page",method:"get",params:{information:e.info,region:e.region,startDateTime:e.date1,endDateTime:e.date2,page:e.page,pageSize:e.pageSize}})}function f(e){return Object(p["a"])({url:"/oilsample/delete",method:"delete",data:e})}function b(e){return Object(p["a"])({url:"/oilsample/query",method:"get",params:{oilSampleId:e}})}function h(e){return Object(p["a"])({url:"/oilsample/add",method:"post",data:e})}var v=l("850b"),y=l("4360"),F={components:{SampleDialog:m},data:function(){return{listLoading:!0,dialogVisible:!1,regions:[],form:{info:"",region:"",date1:"",date2:"",page:1,pageSize:5},total:50,dialogFormVisible:!1,addForm:{deviceNo:"",oilCycle:"",oilSampleDate:"",oilChangeDate:"",engineType:"",isEnd:"1",oilType:"",oilTan:"",oilTbn:"",oilWater:"",oilViscosity:"",oilFe:"",oilCu:"",oilAl:"",oilSi:""},editForm:{deviceNo:"",oilCycle:"",oilSampleDate:"",oilChangeDate:"",engineType:"",isEnd:"",oilType:"",oilTan:"",oilTbn:"",oilWater:"",oilViscosity:"",oilFe:"",oilCu:"",oilAl:"",oilSi:""},rules:{deviceNo:[{required:!0,message:"请输入车辆编号",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],isEnd:[{required:!0}],oilCycle:[{required:!0,message:"请输入机油周期",trigger:"blur"},{type:"number",message:"机油周期必须为数字值"}],oilTan:[{required:!0,message:"请输入机油酸值",trigger:"blur"},{validator:this.validateDouble,trigger:"blur"}],oilTbn:[{required:!0,message:"请输入机油碱值",trigger:"blur"},{validator:this.validateDouble,trigger:"blur"}],oilWater:[{required:!0,message:"请输入机油水含量",trigger:"blur"},{validator:this.validateDouble,trigger:"blur"}],oilViscosity:[{required:!0,message:"请输入机油粘度",trigger:"blur"},{validator:this.validateDouble,trigger:"blur"}],oilFe:[{required:!0,message:"请输入机油铁含量",trigger:"blur"},{validator:this.validateDouble,trigger:"blur"}],oilCu:[{required:!0,message:"请输入机油铜含量",trigger:"blur"},{validator:this.validateDouble,trigger:"blur"}],oilAl:[{required:!0,message:"请输入机油铝含量",trigger:"blur"},{validator:this.validateDouble,trigger:"blur"}],oilSi:[{required:!0,message:"请输入机油硅含量",trigger:"blur"},{validator:this.validateDouble,trigger:"blur"}],oilSampleDate:[{required:!0,message:"请选择日期",trigger:"change"}],oilChangeDate:[{required:!0,message:"请选择日期",trigger:"change"}]},tableData:[],multipleTable:[],ids:[],username:"",roles:[]}},created:function(){this.username=y["a"].getters.name,this.roles=y["a"].getters.roles,this.regionLoad(),this.pageLoad(this.form)},methods:{validateDouble:function(e,t,l){var i=/^(0|([1-9][0-9]*))(\.[\d]+)?$/;return t?i.test(t)?void l():l(new Error("无效的样本数值")):l(new Error("请输入样本数值"))},handleSelectionChange:function(e){this.multipleSelection=e,this.ids=this.multipleSelection.map((function(e){return e.oilSampleId})),console.log(this.multipleSelection.map((function(e){return e.oilSampleId})))},handleDeletes:function(e){var t=this;0!==this.ids.length&&(console.log(e),this.$confirm("此操作将批量删除样本, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){f(t.ids).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.pageLoad(t.form),t.regionLoad()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})})))},onSubmit:function(){console.log("submit!"),this.pageLoad(this.form)},viewSamples:function(e,t){var l=this,i=t.oilSampleId;b(i).then((function(e){l.editForm=e.data;var t=0===e.data.isEnd?"0":"1";l.editForm.isEnd=t,l.dialogFormVisible=!0}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.form.pageSize=e,this.pageLoad(this.form)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.form.page=e,this.pageLoad(this.form)},handleSubmit:function(e){var t=this;console.log("Form submitted with:",e),h(e).then((function(l){console.log("submit:",l),t.$message({type:"success",message:"新增成功!"}),t.pageLoad(t.form),t.roles.includes("editor")&&v["b"].send("新增车辆编号为:"+e.deviceNo+"的机油样本"),t.$refs.addDialog.resetForm(e),t.dialogVisible=!1})).catch((function(){t.$message({type:"error",message:"新增失败！"}),t.$refs.addDialog.resetForm(e),t.dialogVisible=!1}))},handleReset:function(){console.log("Form reset")},resetForm:function(e){this.form.info="",this.form.date1="",this.form.date2="",this.form.region=""},pageLoad:function(e){var t=this;this.listLoading=!0,g(e).then((function(e){console.log("pageQuery:",e),t.total=e.data.total,t.tableData=e.data.records,t.listLoading=!1}))},regionLoad:function(){var e=this;Object(n["j"])().then((function(t){console.log("region:",t),e.regions=t.data}))}}},S=F,x=(l("0f69"),Object(u["a"])(S,i,o,!1,null,null,null));t["default"]=x.exports},fbb2:function(e,t,l){"use strict";l.d(t,"b",(function(){return o})),l.d(t,"g",(function(){return a})),l.d(t,"j",(function(){return r})),l.d(t,"e",(function(){return n})),l.d(t,"h",(function(){return s})),l.d(t,"c",(function(){return c})),l.d(t,"f",(function(){return u})),l.d(t,"d",(function(){return d})),l.d(t,"i",(function(){return m})),l.d(t,"a",(function(){return p})),l.d(t,"k",(function(){return g}));var i=l("b775");function o(e){return Object(i["a"])({url:"/vehicle/add",method:"post",data:e})}function a(e){return Object(i["a"])({url:"/vehicle/page",method:"get",params:{information:e.info,region:e.region,startDateTime:e.startDateTime,endDateTime:e.endDateTime,page:e.page,pageSize:e.pageSize}})}function r(){return Object(i["a"])({url:"/vehicle/region",method:"get"})}function n(){return Object(i["a"])({url:"/vehicle/list",method:"get"})}function s(e){return Object(i["a"])({url:"/vehicle/query",method:"get",params:{deviceNo:e}})}function c(e){return Object(i["a"])({url:"/vehicle/delete",method:"delete",data:e})}function u(e){return Object(i["a"])({url:"/vehicle/edit",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/vehicle/detail",method:"get",params:{deviceNo:e}})}function m(){return Object(i["a"])({url:"/vehicle/rank",method:"get"})}function p(){return Object(i["a"])({url:"/vehicle/accumulated",method:"get"})}function g(e){return Object(i["a"])({url:"/vehicle/vehicleScatter",method:"get",params:{deviceLocationProvince:e}})}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7696527f"],{"0148":function(t,e,a){"use strict";a("836e")},"024a":function(t,e,a){},"298f":function(t,e,a){},"371d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!0}}},[t._v("车辆详细信息")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-warning"},on:{click:function(e){t.changeDialogVisible=!0}}},[t._v("车辆换油")]),a("vehicle-info-dialog",{attrs:{visible:t.centerDialogVisible,vehicle:t.vehicle},on:{"update:visible":function(e){t.centerDialogVisible=e}}}),a("change-oil-dialog",{ref:"changeDialog",attrs:{visible:t.changeDialogVisible,ruleForm:t.changeForm,rules:t.rules},on:{"update:visible":function(e){t.changeDialogVisible=e},submits:t.handleChange}}),a("panel-group-up",{attrs:{chartData:t.vehicle,locationName:t.locationName}}),a("panel-group-down",{attrs:{chartData:t.vehicle}}),a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{xs:24,sm:24,lg:12}},[a("div",{staticClass:"chart-wrapper"},[a("oil-life-chart",{attrs:{deviceNo:this.deviceNo}})],1)]),a("el-col",{attrs:{xs:24,sm:24,lg:12}},[a("div",{staticClass:"chart-wrapper"},[a("change-oil-info",{attrs:{chartData:t.changeOilData}})],1)])],1),a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("engine-line-chart",{attrs:{deviceNo:this.deviceNo}})],1)]),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("engine-pie-chart",{attrs:{deviceNo:this.deviceNo}})],1)]),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("engine-bar-chart",{attrs:{deviceNo:this.deviceNo}})],1)])],1)],1)},n=[],s=(a("a15b"),a("ac1f"),a("466d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper icon-people",staticStyle:{padding:"10px"}},[a("svg-icon",{staticStyle:{width:"60px",height:"60px"},attrs:{"icon-class":"loader","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 车辆编号 ")]),a("div",{staticClass:"card-panel-num",staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t.chartData.deviceNo)+" ")])])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper icon-message"},[a("svg-icon",{attrs:{"icon-class":"name","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 车辆名称 ")]),a("div",{staticClass:"card-panel-num"},[t._v(" "+t._s(t.chartData.deviceName)+" ")])])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"icon-class":"time","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 机油使用时间 ")]),a("div",{staticClass:"card-panel-num"},[a("count-to",{staticStyle:{"font-size":"26px"},attrs:{"start-val":0,"end-val":t.chartData.oilRuntime,duration:2200}})],1)])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper icon-shopping"},[a("svg-icon",{attrs:{"icon-class":"location","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 车辆活动区域 ")]),a("div",{staticClass:"card-panel-num"},[t._v(" "+t._s(t.locationName)+" ")])])])])],1)}),o=[],r=a("ec1b"),l=a.n(r),c={components:{CountTo:l.a},data:function(){return{}},props:{chartData:{type:Object,required:!0},locationName:{type:String,required:!0}},mounted:function(){},methods:{}},d=c,u=(a("0148"),a("2877")),h=Object(u["a"])(d,s,o,!1,null,"d1be8fce",null),p=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("newVisitis")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-people"},[a("svg-icon",{attrs:{"icon-class":"date","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 上次换油时间 ")]),a("div",{staticClass:"card-panel-num"},[t._v(" "+t._s(t.chartData.lastChangeDatetime.toLocaleString().replace(/T/g," ").substr(0,10))+" ")])])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("messages")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-message"},[a("svg-icon",{attrs:{"icon-class":"life","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 机油剩余寿命 ")]),a("div",{staticClass:"card-panel-num"},[a("count-to",{staticStyle:{"font-size":"26px"},attrs:{"start-val":0,"end-val":t.chartData.oilLifeTimePercent,duration:1e3}})],1)])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("purchases")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"icon-class":"health","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 机油健康程度 ")]),a("div",{staticClass:"card-panel-num",style:t.statusType(t.chartData.oilLifeTimePercent)},[t._v(" "+t._s(t.statusText(t.chartData.oilLifeTimePercent))+" ")])])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper icon-shopping"},[a("svg-icon",{attrs:{"icon-class":"oil","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 车辆换油次数 ")]),a("div",{staticClass:"card-panel-num"},[a("count-to",{staticStyle:{"font-size":"26px"},attrs:{"start-val":0,"end-val":t.chartData.changeCount,duration:1e3}})],1)])])])],1)},v=[],m=(a("323e"),{components:{CountTo:l.a},props:{chartData:{type:Object,required:!0}},methods:{statusType:function(t){var e=0;e=t>30?0:t<=30&&t>10?1:2;var a={0:"color: green",1:"color: orange",2:"color: red"};return a[e]||"color: red"},statusText:function(t){var e=0;e=t>30?0:t<=30&&t>10?1:2;var a={0:"健康",1:"已老化",2:"需换油"};return a[e]||"健康"}}}),f=m,b=(a("3b8b"),Object(u["a"])(f,g,v,!1,null,"0107e329",null)),y=b.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"车辆详细信息",visible:t.localVisible,width:"30%",center:""},on:{"update:visible":function(e){t.localVisible=e}}},[a("div",{staticClass:"dialog-content"},[a("strong",[t._v("车辆编号：")]),t._v(t._s(t.vehicle.deviceNo))]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("车辆名称：")]),t._v(t._s(t.vehicle.deviceName))]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("车辆活动区域：")]),t._v(t._s(t.vehicle.deviceLocation))]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("车辆型号：")]),t._v(t._s(t.vehicle.deviceType))]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("车辆发动机型号：")]),t._v(t._s(t.vehicle.deviceEngineType))]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("车辆发动机运行时间：")]),t._v(t._s(t.vehicle.oilRuntime)+"小时")]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("车辆发动机累计运行时间：")]),t._v(t._s(t.vehicle.deviceAccumulatedRuntime)+"小时")]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("机油型号：")]),t._v(t._s(t.vehicle.oilType))]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("车辆累计换油次数：")]),t._v(t._s(t.vehicle.changeCount))]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("机油寿命百分比：")]),t._v(t._s(t.vehicle.oilLifeTimePercent)+"%")]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("车辆换油日期：")]),t._v(t._s(t.vehicle.lastChangeDatetime.toLocaleString().replace(/T/g," ")))]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("车辆联系人：")]),t._v(t._s(t.vehicle.deviceManager))]),a("div",{staticClass:"dialog-content"},[a("strong",[t._v("联系方式：")]),t._v(t._s(t.vehicle.deviceManagerPhone))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.closeDialog}},[t._v("确 定")])],1)])},D=[],C={name:"VehicleInfoDialog",props:{visible:{type:Boolean,required:!0},vehicle:{type:Object,required:!0}},data:function(){return{localVisible:this.visible}},watch:{visible:function(t){this.localVisible=t},localVisible:function(t){this.$emit("update:visible",t)}},methods:{closeDialog:function(){this.$emit("update:visible",!1)}}},x=C,w=(a("53e1"),Object(u["a"])(x,_,D,!1,null,"252aabe4",null)),S=w.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{class:t.className,style:{height:t.height,width:t.width},attrs:{data:t.chartData,stripe:""}},[a("el-table-column",{attrs:{label:"车辆编号","min-width":"150",prop:"deviceNo",align:"center"}}),a("el-table-column",{attrs:{label:"历史换油时间",width:"195",align:"center",prop:"oilChangeDate"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.oilChangeDate.toLocaleString().replace(/T/g," ").substr(0,16)))])]}}])}),a("el-table-column",{attrs:{label:"机油运行时间",width:"145",align:"center",prop:"oilRuntime"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.oilRuntime+"小时")+" ")]}}])}),a("el-table-column",{attrs:{label:"机油状态",width:"100",align:"center",prop:"oilStatus"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tag",{attrs:{type:t.statusType(i.oilStatus)}},[t._v(" "+t._s(t.statusText(i.oilStatus))+" ")])]}}])})],1)},O=[],$={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"330px"},chartData:{type:Array,required:!0}},filters:{orderNoFilter:function(t){return t.substring(0,30)}},data:function(){return{}},created:function(){},methods:{statusType:function(t){var e={0:"success",1:"warning",2:"danger"};return e[t]||"info"},statusText:function(t){var e={0:"健康",1:"已老化",2:"已失效"};return e[t]||t}}},T=$,L=Object(u["a"])(T,N,O,!1,null,null,null),E=L.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},z=[],k=a("313e"),R=a.n(k),V=a("ed08"),F={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(V["a"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}},I=a("b775");function P(t){return Object(I["a"])({url:"/oillife/life",method:"get",params:{deviceNo:t}})}function q(t){return Object(I["a"])({url:"/oillife/engineline",method:"get",params:{deviceNo:t}})}function W(t){return Object(I["a"])({url:"/oillife/enginebar",method:"get",params:{deviceNo:t}})}function A(t){return Object(I["a"])({url:"/oillife/enginepie",method:"get",params:{deviceNo:t}})}function H(t){return Object(I["a"])({url:"/oillife/changehistory",method:"get",params:{deviceNo:t}})}function B(t){return Object(I["a"])({url:"/oillife/changeoil",method:"post",data:t})}a("817d");var M={mixins:[F],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"330px"},autoResize:{type:Boolean,default:!0},deviceNo:{type:String,required:!0}},data:function(){return{chart:null,chartData:{date:[],life:[]}}},mounted:function(){var t=this;P(this.deviceNo).then((function(e){console.log("life:",e),t.chartData.date=e.data.date,t.chartData.life=e.data.life,t.$nextTick((function(){console.log(t.chartData),t.initChart()}))}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=R.a.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.date,a=t.life;this.chart.setOption({xAxis:{data:e,boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:60,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},title:{show:!0,left:"center",top:"10",text:"机油剩余寿命百分比曲线",textStyle:{color:"#666666",fontSize:20,fontWeight:"bold"}},series:[{name:"oil_life_percent",itemStyle:{normal:{color:"#63c4c7",lineStyle:{color:"#5a92d0",width:2},borderWidth:8}},smooth:!0,type:"line",data:a,areaStyle:{},animationDuration:2800,animationEasing:"cubicInOut"}]})}}},G=M,J=Object(u["a"])(G,j,z,!1,null,null,null),U=J.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},Q=[];a("817d");var X={mixins:[F],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"330px"},autoResize:{type:Boolean,default:!0},deviceNo:{type:String,required:!0}},data:function(){return{chart:null,chartData:{type:["oil_temperature","engine_speed","engine_load"],date:[],oilTempData:[],engineSpeedData:[],engineLoadData:[]}}},mounted:function(){var t=this;q(this.deviceNo).then((function(e){console.log("engineLine:",e),t.chartData.date=e.data.date,t.chartData.oilTempData=e.data.oilTempData,t.chartData.engineSpeedData=e.data.engineSpeedData,t.chartData.engineLoadData=e.data.engineLoadData,t.$nextTick((function(){console.log("engineLineChart:",t.chartData),t.initChart()}))}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=R.a.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,a=t.date,i=t.oilTempData,n=t.engineSpeedData,s=t.engineLoadData;this.chart.setOption({xAxis:{data:a,boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:60,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{top:"28",data:e},title:{show:!0,left:"center",top:"0",text:"发动机工况数据示意图",textStyle:{color:"#666666",fontSize:18,fontWeight:"bold"}},series:[{name:e[0],itemStyle:{normal:{color:"#e47470",lineStyle:{color:"#ad3832",width:2},borderWidth:8}},smooth:!0,type:"line",data:i,animationDuration:2800,animationEasing:"cubicInOut"},{name:e[1],itemStyle:{normal:{color:"#7ec050",lineStyle:{color:"#377e22",width:2},borderWidth:8}},smooth:!0,type:"line",data:n,animationDuration:2800,animationEasing:"cubicInOut"},{name:e[2],itemStyle:{normal:{color:"#ebc069",lineStyle:{color:"#f0d08f",width:2},borderWidth:8}},smooth:!0,type:"line",data:s,animationDuration:2800,animationEasing:"cubicInOut"}]})}}},Y=X,Z=Object(u["a"])(Y,K,Q,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},at=[];a("817d");var it={mixins:[F],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"330px"},deviceNo:{type:String,required:!0}},data:function(){return{chart:null,chartData:{type:["oil_temperature","engine_speed","engine_load"],value:[]}}},mounted:function(){var t=this;A(this.deviceNo).then((function(e){console.log("enginePie:",e),t.chartData.value=e.data.value,t.$nextTick((function(){t.initChart()}))}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=R.a.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(t){var e=t.type,a=t.value;this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:e},title:{show:!0,left:"center",top:"0",text:"发动机危险工况数据占比",textStyle:{color:"#666666",fontSize:18,fontWeight:"bold"}},series:[{name:"发动机危险工况数据占比",type:"pie",roseType:"radius",radius:[15,95],center:["50%","48%"],data:[{value:a[0],name:e[0]},{value:a[1],name:e[1]},{value:a[2],name:e[2]}],itemStyle:{color:function(t){var e=["#e47470","#7ec050","#f0d08f"];return e[t.dataIndex]}},animationEasing:"cubicInOut",animationDuration:2600}]})}}},nt=it,st=Object(u["a"])(nt,et,at,!1,null,null,null),ot=st.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},lt=[];a("817d");var ct={mixins:[F],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"330px"},autoResize:{type:Boolean,default:!0},deviceNo:{type:String,required:!0}},data:function(){return{chart:null,chartData:{type:["oil_temperature","engine_speed","engine_load"],date:[],oilTempData:[],engineSpeedData:[],engineLoadData:[]}}},mounted:function(){var t=this;W(this.deviceNo).then((function(e){console.log("engineBar:",e),t.chartData.date=e.data.date,t.chartData.oilTempData=e.data.oilTempData,t.chartData.engineSpeedData=e.data.engineSpeedData,t.chartData.engineLoadData=e.data.engineLoadData,t.$nextTick((function(){t.initChart()}))}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=R.a.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.date,a=t.oilTempData,i=t.engineSpeedData,n=t.engineLoadData;this.chart.setOption({grid:{top:55,left:"0",right:"0",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{data:e,type:"category",boundaryGap:!0,axisTick:{alignWithLabel:!0}},yAxis:[{type:"value",axisTick:{show:!1}}],legend:{top:"28",data:["oil_temperature","engine_speed","engine_load"]},title:{show:!0,left:"center",top:"0",text:"机油每日消耗占比",textStyle:{color:"#666666",fontSize:18,fontWeight:"bold"}},series:[{name:"oil_temperature",barWidth:"60%",type:"bar",stack:"vistors",itemStyle:{color:"#e47470"},data:a,animationDuration:2800,animationEasing:"cubicInOut"},{name:"engine_speed",barWidth:"50%",type:"bar",stack:"vistors",itemStyle:{color:"#7ec050"},data:i,animationDuration:2800,animationEasing:"cubicInOut"},{name:"engine_load",barWidth:"50%",type:"bar",stack:"vistors",itemStyle:{color:"#f0d08f"},data:n,animationDuration:2800,animationEasing:"cubicInOut"}]})}}},dt=ct,ut=Object(u["a"])(dt,rt,lt,!1,null,null,null),ht=ut.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"车辆换油时间","before-close":t.closeDialog,visible:t.localVisible,width:"30%",center:""},on:{"update:visible":function(e){t.localVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"form-item",attrs:{model:t.ruleForm,rules:t.rules,inline:!1,"label-width":t.labelWidth}},[a("el-row",[a("el-form-item",{attrs:{label:"机油更换日期",prop:"lastChangeDatetime","label-width":"120px"}},[a("el-col",{attrs:{span:18}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"机油更换日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.ruleForm.lastChangeDatetime,callback:function(e){t.$set(t.ruleForm,"lastChangeDatetime",e)},expression:"ruleForm.lastChangeDatetime"}})],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")]),a("el-button",{staticStyle:{"margin-left":"30px"},on:{click:t.closeDialog}},[t._v("取 消")])],1)],1)],1)},gt=[],vt={name:"ChangeOilDialog",props:{visible:{type:Boolean,required:!0},rules:{type:Object,required:!0},ruleForm:{type:Object,required:!0}},data:function(){return{localVisible:this.visible,form:{deviceNo:"",lastChangeDatetime:""}}},watch:{visible:function(t){this.localVisible=t},localVisible:function(t){this.$emit("update:visible",t)}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$confirm("确认换油时间无误?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("dialogForm:",e.ruleForm),e.$emit("submits",e.ruleForm)})).catch((function(){e.$message({type:"info",message:"已取消"})}))}))},closeDialog:function(){this.$refs.ruleForm.resetFields(),this.$emit("update:visible",!1)}}},mt=vt,ft=(a("3d71"),Object(u["a"])(mt,pt,gt,!1,null,"b61c04dc",null)),bt=ft.exports,yt=a("fbb2"),_t={name:"Form",components:{PanelGroupUp:p,PanelGroupDown:y,VehicleInfoDialog:S,ChangeOilInfo:E,OilLifeChart:U,EngineLineChart:tt,EnginePieChart:ot,EngineBarChart:ht,ChangeOilDialog:bt},data:function(){return{deviceNo:"",vehicle:{deviceNo:"",deviceName:"",deviceLocation:"",deviceType:"",deviceEngineType:"",oilRuntime:0,deviceAccumulatedRuntime:0,oilType:"",changeCount:0,oilLifeTimePercent:0,lastChangeDatetime:"",deviceManager:"",deviceManagerPhone:""},changeForm:{deviceNo:"",lastChangeDatetime:""},rules:{lastChangeDatetime:[{required:!0,message:"请选择日期",trigger:"change"}]},centerDialogVisible:!1,changeDialogVisible:!1,changeOilData:[],locationList:[],locationName:"",regex:/.+?(省|市|自治区|自治州|县|区)/g}},beforeRouteEnter:function(t,e,a){sessionStorage.getItem("fromVehicleList")?(sessionStorage.removeItem("fromVehicleList"),a()):a({name:"List"})},created:function(){this.deviceNo=this.$route.params.id,this.changeForm.deviceNo=this.deviceNo,console.log("deviceNo:",this.deviceNo),this.pageLoad(this.deviceNo)},methods:{handelLocationName:function(){if(this.locationList=this.vehicle.deviceLocation.match(this.regex),null===this.locationList||0===this.locationList.length)return this.locationName=this.vehicle.deviceLocation.substr(0,9),void console.log("locationName:",this.locationName);var t=this.locationList.join("");this.locationName=t.substr(0,9),console.log("locationName:",this.locationName)},pageLoad:function(t){var e=this;Object(yt["d"])(t).then((function(t){console.log("vehicleDetail:",t),e.vehicle=t.data,e.vehicle.oilLifeTimePercent=100*t.data.oilLifeTimePercent,e.handelLocationName()})),H(t).then((function(t){console.log("changeHistory:",t),e.changeOilData=t.data}))},handleChange:function(t){var e=this;console.log("Form submitted with:",t),B(t).then((function(t){console.log("submit:",t),e.$message({type:"success",message:"更新成功!"}),e.$refs.changeDialog.closeDialog(),e.changeDialogVisible=!1})).catch((function(){e.$message({type:"error",message:"更新失败！"}),e.$refs.changeDialog.closeDialog(),e.changeDialogVisible=!1}))}}},Dt=_t,Ct=(a("ade9"),Object(u["a"])(Dt,i,n,!1,null,"ae14af6e",null));e["default"]=Ct.exports},"3b8b":function(t,e,a){"use strict";a("96ce")},"3d71":function(t,e,a){"use strict";a("7793")},"466d":function(t,e,a){"use strict";var i=a("d784"),n=a("825a"),s=a("50c4"),o=a("1d80"),r=a("8aa5"),l=a("14c3");i("match",1,(function(t,e,a){return[function(e){var a=o(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,a):new RegExp(e)[t](String(a))},function(t){var i=a(e,t,this);if(i.done)return i.value;var o=n(t),c=String(this);if(!o.global)return l(o,c);var d=o.unicode;o.lastIndex=0;var u,h=[],p=0;while(null!==(u=l(o,c))){var g=String(u[0]);h[p]=g,""===g&&(o.lastIndex=r(c,s(o.lastIndex),d)),p++}return 0===p?null:h}]}))},"53e1":function(t,e,a){"use strict";a("024a")},7793:function(t,e,a){},"836e":function(t,e,a){},"96ce":function(t,e,a){},a15b:function(t,e,a){"use strict";var i=a("23e7"),n=a("44ad"),s=a("fc6a"),o=a("a640"),r=[].join,l=n!=Object,c=o("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(t){return r.call(s(this),void 0===t?",":t)}})},ade9:function(t,e,a){"use strict";a("298f")},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("53ca"),a("d3b7"),a("4d63"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("4d90"),a("5319"),a("159b");function i(t,e,a){var i,n,s,o,r,l=function l(){var c=+new Date-o;c<e&&c>0?i=setTimeout(l,e-c):(i=null,a||(r=t.apply(s,n),i||(s=n=null)))};return function(){for(var n=arguments.length,c=new Array(n),d=0;d<n;d++)c[d]=arguments[d];s=this,o=+new Date;var u=a&&!i;return i||(i=setTimeout(l,e)),u&&(r=t.apply(s,c),s=c=null),r}}},fbb2:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"g",(function(){return s})),a.d(e,"j",(function(){return o})),a.d(e,"e",(function(){return r})),a.d(e,"h",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"f",(function(){return d})),a.d(e,"d",(function(){return u})),a.d(e,"i",(function(){return h})),a.d(e,"a",(function(){return p})),a.d(e,"k",(function(){return g}));var i=a("b775");function n(t){return Object(i["a"])({url:"/vehicle/add",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/vehicle/page",method:"get",params:{information:t.info,region:t.region,startDateTime:t.startDateTime,endDateTime:t.endDateTime,page:t.page,pageSize:t.pageSize}})}function o(){return Object(i["a"])({url:"/vehicle/region",method:"get"})}function r(){return Object(i["a"])({url:"/vehicle/list",method:"get"})}function l(t){return Object(i["a"])({url:"/vehicle/query",method:"get",params:{deviceNo:t}})}function c(t){return Object(i["a"])({url:"/vehicle/delete",method:"delete",data:t})}function d(t){return Object(i["a"])({url:"/vehicle/edit",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/vehicle/detail",method:"get",params:{deviceNo:t}})}function h(){return Object(i["a"])({url:"/vehicle/rank",method:"get"})}function p(){return Object(i["a"])({url:"/vehicle/accumulated",method:"get"})}function g(t){return Object(i["a"])({url:"/vehicle/vehicleScatter",method:"get",params:{deviceLocationProvince:t}})}}}]);